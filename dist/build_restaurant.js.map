{"version":3,"names":[],"mappings":"","sources":["build_restaurant.js"],"sourcesContent":["!function u(i,o,l){function c(n,e){if(!o[n]){if(!i[n]){var t=\"function\"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);var r=new Error(\"Cannot find module '\"+n+\"'\");throw r.code=\"MODULE_NOT_FOUND\",r}var a=o[n]={exports:{}};i[n][0].call(a.exports,function(e){return c(i[n][1][e]||e)},a,a.exports,u,i,o,l)}return o[n].exports}for(var s=\"function\"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,n,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}}();var a=function(){function t(){!function(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return r(t,null,[{key:\"fetchRestaurants\",value:function(n){fetch(t.DATABASE_URL).then(function(e){return e.json()}).then(function(e){n(null,e)}).catch(function(e){n(\"Request failed. Returned status of \"+e,null)})}},{key:\"fetchRestaurantById\",value:function(e,n){fetch(t.DATABASE_URL+\"/\"+e).then(function(e){return e.json()}).then(function(e){n(null,e)}).catch(function(){n(\"Restaurant does not exist\",null)})}},{key:\"fetchRestaurantByCuisine\",value:function(r,a){t.fetchRestaurants(function(e,n){if(e)a(e,null);else{var t=n.filter(function(e){return e.cuisine_type==r});a(null,t)}})}},{key:\"fetchRestaurantByNeighborhood\",value:function(r,a){t.fetchRestaurants(function(e,n){if(e)a(e,null);else{var t=n.filter(function(e){return e.neighborhood==r});a(null,t)}})}},{key:\"fetchRestaurantByCuisineAndNeighborhood\",value:function(r,a,u){t.fetchRestaurants(function(e,n){if(e)u(e,null);else{var t=n;\"all\"!=r&&(t=t.filter(function(e){return e.cuisine_type==r})),\"all\"!=a&&(t=t.filter(function(e){return e.neighborhood==a})),u(null,t)}})}},{key:\"fetchNeighborhoods\",value:function(a){t.fetchRestaurants(function(e,t){if(e)a(e,null);else{var r=t.map(function(e,n){return t[n].neighborhood}),n=r.filter(function(e,n){return r.indexOf(e)==n});a(null,n)}})}},{key:\"fetchCuisines\",value:function(a){t.fetchRestaurants(function(e,t){if(e)a(e,null);else{var r=t.map(function(e,n){return t[n].cuisine_type}),n=r.filter(function(e,n){return r.indexOf(e)==n});a(null,n)}})}},{key:\"setRestaurantFavoriteIndicator\",value:function(e,n){return fetch(t.DATABASE_URL+\"/\"+e+\"/?is_favorite=\"+n,{method:\"PUT\"}).then(function(e){return console.log(e),e.json()}).then(function(e){console.log(e,\"<- favorited\")}).catch(function(){callback(\"Restaurant does not exist\",null)})}},{key:\"urlForRestaurant\",value:function(e){return\"./restaurant.html?id=\"+e.id}},{key:\"imageUrlForRestaurant\",value:function(e){return\"/dist/images/\"+e.photograph+\".webp\"}},{key:\"mapMarkerForRestaurant\",value:function(e,n){return new google.maps.Marker({position:e.latlng,title:e.name,url:t.urlForRestaurant(e),map:n,animation:google.maps.Animation.DROP})}},{key:\"DATABASE_URL\",get:function(){return\"http://localhost:1337/restaurants\"}}]),t}();t.default=a},{}],2:[function(e,n,t){\"use strict\";var r,a=e(\"./dbhelper\"),u=(r=a)&&r.__esModule?r:{default:r};var i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById(\"restaurant-name\").innerHTML=e.name,document.getElementById(\"restaurant-address\").innerHTML=e.address;var n=document.getElementById(\"restaurant-img\");n.className=\"restaurant-img\",n.src=u.default.imageUrlForRestaurant(e),n.alt=\"Image of a restaurant called \"+e.name,document.getElementById(\"restaurant-cuisine\").innerHTML=e.cuisine_type,e.operating_hours&&o();var t=document.querySelector(\".switch input\");console.log(e),t.checked=\"true\"===e.is_favorite,t.addEventListener(\"change\",function(){u.default.setRestaurantFavoriteIndicator(e.id,\"false\"===e.is_favorite?\"true\":\"false\")}),l()},o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById(\"restaurant-hours\");for(var t in e){var r=document.createElement(\"tr\"),a=document.createElement(\"td\");a.innerHTML=t,r.appendChild(a);var u=document.createElement(\"td\");u.innerHTML=e[t],r.appendChild(u),n.appendChild(r)}},l=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById(\"reviews-container\"),t=document.createElement(\"h3\");if(t.innerHTML=\"Reviews\",n.appendChild(t),!e){var r=document.createElement(\"p\");return r.innerHTML=\"No reviews yet!\",void n.appendChild(r)}var a=document.getElementById(\"reviews-list\");e.forEach(function(e){a.appendChild(c(e))}),n.appendChild(a)},c=function(e){var n=document.createElement(\"li\"),t=document.createElement(\"div\");t.classList.add(\"review__review-information\");var r=document.createElement(\"p\");r.classList.add(\"review__reviewer-name\"),r.innerHTML=e.name,t.appendChild(r);var a=document.createElement(\"p\");r.classList.add(\"review__review-date\"),a.innerHTML=e.date,t.appendChild(a);var u=document.createElement(\"p\");u.innerHTML=\"Rating: \"+e.rating,u.classList.add(\"review__review-rating\"),t.appendChild(u);var i=document.createElement(\"p\");return i.classList.add(\"review__review-comment\"),i.innerHTML=e.comments,n.appendChild(t),n.appendChild(i),n},s=function(e,n){n||(n=window.location.href),e=e.replace(/[\\[\\]]/g,\"\\\\$&\");var t=new RegExp(\"[?&]\"+e+\"(=([^&#]*)|&|#|$)\").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\\+/g,\" \")):\"\":null};window.initMap=function(){!function(t){if(self.restaurant)t(null,self.restaurant);else{var e=s(\"id\");e?u.default.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(i(),t(null,n)):console.error(e)}):(error=\"No restaurant id in URL\",t(error,null))}}(function(e,n){e?console.error(e):(self.map=new google.maps.Map(document.getElementById(\"map\"),{zoom:16,center:n.latlng,scrollwheel:!1}),function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById(\"breadcrumb\"),t=document.createElement(\"li\");t.innerHTML=e.name,n.appendChild(t)}(),u.default.mapMarkerForRestaurant(self.restaurant,self.map))})}},{\"./dbhelper\":1}]},{},[2]);"],"file":"build_restaurant.js"}